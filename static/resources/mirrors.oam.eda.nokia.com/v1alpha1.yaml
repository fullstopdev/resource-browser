additionalPrinterColumns:
  - jsonPath: .status.lastChange
    name: Last Change
    type: date
  - jsonPath: .status.operationalState
    name: Operational State
    type: string
name: v1alpha1
schema:
  openAPIV3Schema:
    description: Mirror is the Schema for the mirrors API
    properties:
      apiVersion:
        description: |-
          APIVersion defines the versioned schema of this representation of an object.
          Servers should convert recognized schemas to the latest internal value, and
          may reject unrecognized values.
          More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
        type: string
      kind:
        description: |-
          Kind is a string value representing the REST resource this object represents.
          Servers may infer this from the endpoint the client submits requests to.
          Cannot be updated.
          In CamelCase.
          More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
        type: string
      metadata:
        type: object
      spec:
        description: Mirror allows for the configuration of mirroring sources, including interfaces, subinterfaces, and filters, as well as the destination for the mirrored traffic, which can be either local or remote.
        properties:
          localDestination:
            description: Local destination for the mirror, there can only be either a remote destination or local destination provisioned for a Mirror.
            properties:
              interface:
                description: Reference to an Interface resource to send the mirrored traffic to.  This must be on the same Node as the source.
                type: string
              vlanID:
                description: Single value between 0-4094 support, or the special keyword untagged.
                type: string
            type: object
          remoteDestination:
            description: Remote destination for the mirror, there can only be either a remote destination or local destination provisioned for a Mirror.
            properties:
              defaultRouter:
                description: Specifies the DefaultRouter to reach the remote destination of the mirror, a Router and DefaultRouter reference cannot be set at the same time.
                type: string
              destinationIP:
                description: Remote destination IP address.  When a remote destination is used for the mirror, the destinationIP is mandatory.
                type: string
              encapsulation:
                enum:
                  - L2OGRE
                  - L3OGRE
                type: string
              router:
                description: Specifies the Router to reach the remote destination of the mirror, a Router and DefaultRouter reference cannot be set at the same time.
                type: string
              sourceIP:
                description: Source IP to use when sending a mirror to a remote destination.  When a remote destination us used for the mirror, the sourceIP is mandatory.
                type: string
            type: object
          sources:
            description: Mirror sources.
            properties:
              direction:
                description: The direction of the traffic being mirrored.
                enum:
                  - Ingress
                  - Egress
                  - IngressEgress
                type: string
              filters:
                items:
                  properties:
                    filter:
                      description: Emittes an MirrorFilter and uses the filter as a source for the Mirror.
                      properties:
                        entries:
                          description: Specifies the list of filter entries, in order.
                          items:
                            properties:
                              description:
                                description: Description of the FilterEntry.
                                type: string
                              ipEntry:
                                properties:
                                  action:
                                    description: An action to take, either 'Accept','Drop', or 'RateLimit'.
                                    enum:
                                      - Drop
                                      - Accept
                                      - RateLimit
                                    type: string
                                  destinationPortName:
                                    description: Destination port to match by name.
                                    enum:
                                      - ACAP
                                      - AFP-TCP
                                      - ARNS
                                      - ASF-RMCP
                                      - ASHARE
                                      - ATALK-RM
                                      - AURP
                                      - AUTH
                                      - BFD
                                      - BFD-ECHO
                                      - BFTP
                                      - BGMP
                                      - BGP
                                      - BOOTPC
                                      - BOOTPS
                                      - CCSO-NS
                                      - CHARGEN
                                      - CISCO-TDP
                                      - CITADEL
                                      - CLEARCASE
                                      - COMMERCE
                                      - COURIER
                                      - DAYTIME
                                      - DHCP-FAILOVER
                                      - DHCPV6-CLIENT
                                      - DHCPV6-SERVER
                                      - DICOM
                                      - DISCARD
                                      - DNSIX
                                      - DOMAIN
                                      - DSP
                                      - ECHO
                                      - EPP
                                      - ESRO
                                      - EXEC
                                      - FINGER
                                      - FTP
                                      - FTP-DATA
                                      - FTPS
                                      - FTPS-DATA
                                      - GODI
                                      - GOPHER
                                      - GTP-C
                                      - GTP-PRIME
                                      - GTP-U
                                      - HA-CLUSTER
                                      - HOSTNAME
                                      - HP-ALARM-MGR
                                      - HTTP
                                      - HTTP-ALT
                                      - HTTP-MGMT
                                      - HTTP-RPC
                                      - HTTPS
                                      - IEEE-MMS-SSL
                                      - IMAP
                                      - IMAP3
                                      - IMAPS
                                      - IPP
                                      - IPSEC
                                      - IPX
                                      - IRC
                                      - IRIS-BEEP
                                      - ISAKMP
                                      - ISAKMP-NAT
                                      - ISCSI
                                      - ISO-TSAP
                                      - KERBEROS
                                      - KERBEROS-ADM
                                      - KLOGIN
                                      - KPASSWD
                                      - KSHELL
                                      - L2TP
                                      - LDAP
                                      - LDAPS
                                      - LDP
                                      - LMP
                                      - LOGIN
                                      - LPD
                                      - LSP-PING
                                      - MAC-SERVER-ADM
                                      - MATIP-A
                                      - MATIP-B
                                      - MICRO-BFD
                                      - MICROSOFT-DS
                                      - MOBILE-IP
                                      - MONITOR
                                      - MPP
                                      - MS-EXCHANGE
                                      - MSDP
                                      - MSP
                                      - MSSQL-M
                                      - MSSQL-S
                                      - MULTIHOP-BFD
                                      - NAS
                                      - NCP
                                      - NETBIOS-DATA
                                      - NETBIOS-NS
                                      - NETBIOS-SS
                                      - NETNEWS
                                      - NETRJS-1
                                      - NETRJS-2
                                      - NETRJS-3
                                      - NETRJS-4
                                      - NETWALL
                                      - NEW-RWHO
                                      - NFS
                                      - NNTP
                                      - NNTPS
                                      - NTP
                                      - ODMR
                                      - OLSR
                                      - OPENVPN
                                      - PIM-AUTO-RP
                                      - PKIX-TIMESTAMP
                                      - POP2
                                      - POP3
                                      - POP3S
                                      - PPTP
                                      - PRINT-SRV
                                      - PTP-EVENT
                                      - PTP-GENERAL
                                      - QMTP
                                      - QOTD
                                      - RADIUS
                                      - RADIUS-ACCT
                                      - REMOTE-MAIL
                                      - REMOTEFS
                                      - REMOTECMD
                                      - RIP
                                      - RJE
                                      - RLP
                                      - RLZDB
                                      - RMC
                                      - RMONITOR
                                      - RPC2PORTMAP
                                      - RSYNC
                                      - RTELNET
                                      - RTSP
                                      - SGMP
                                      - SILC
                                      - SMUX
                                      - SNA-GW
                                      - SNMP
                                      - SNMP-TRAP
                                      - SNPP
                                      - SMTP
                                      - SQL-SVCS
                                      - SQL
                                      - SSH
                                      - SUBMISSION
                                      - SUNRPC
                                      - SVCLOC
                                      - SYSLOG
                                      - SYSTAT
                                      - TACACS
                                      - TALK
                                      - TCPMUX
                                      - TCPNETHASPSRV
                                      - TFTP
                                      - TIME
                                      - TIMED
                                      - UPS
                                      - XDMCP
                                      - XNS-CH
                                      - XNS-MAIL
                                      - XNS-TIME
                                      - Z3950
                                    type: string
                                  destinationPortNumber:
                                    description: Destination port to match by numerical value.
                                    maximum: 65535
                                    minimum: 0
                                    type: integer
                                  destinationPortOperator:
                                    description: Operator to use when matching destinationPort, either Equals, GreaterOrEquals, or LessOrEquals.
                                    enum:
                                      - Equals
                                      - GreaterOrEquals
                                      - LessOrEquals
                                    type: string
                                  destinationPortRange:
                                    description: Range of destination ports to match, in the format n-m, e.g. 100-200,  The start and end of the range must be port numbers.
                                    type: string
                                  destinationPrefix:
                                    description: Destination prefix to match.
                                    type: string
                                  firstFragment:
                                    description: Match the first fragment only.
                                    type: boolean
                                  fragment:
                                    description: Match any fragment.
                                    type: boolean
                                  icmpCode:
                                    description: Match a specific ICMP code, as a number between 0-255, e.g. 0.
                                    items:
                                      type: integer
                                    maxItems: 255
                                    minItems: 0
                                    type: array
                                  icmpTypeName:
                                    description: Match a specific ICMP type by name, e.g. dest-unreachable.
                                    enum:
                                      - DestUnreachable
                                      - Echo
                                      - EchoReply
                                      - EchoRequest
                                      - McastRtrAdv
                                      - McastRtrSolicit
                                      - McastRtrTerm
                                      - MldDone
                                      - MldQuery
                                      - MldReport
                                      - MldV2
                                      - NeighborAdvertise
                                      - NeighborSolicit
                                      - NodeInfoQuery
                                      - NodeInfoResponse
                                      - PacketTooBig
                                      - ParamProblem
                                      - Redirect
                                      - RouterAdvertise
                                      - RouterRenumber
                                      - RouterSolicit
                                      - SourceQuench
                                      - TimeExceeded
                                      - Timestamp
                                      - TimestampReply
                                    type: string
                                  icmpTypeNumber:
                                    description: Match a specific ICMP type by number.
                                    maximum: 255
                                    minimum: 0
                                    type: integer
                                  log:
                                    description: Log the matches for this entry.
                                    type: boolean
                                  protocolName:
                                    description: Match a specific IP protocol name (specified in the type field of the IP header).
                                    enum:
                                      - AH
                                      - EGP
                                      - EIGRP
                                      - ESP
                                      - GGP
                                      - GRE
                                      - ICMP
                                      - ICMP6
                                      - IDRP
                                      - IGMP
                                      - IGP
                                      - IPV4
                                      - IPV6
                                      - IPV6-DEST-OPTS
                                      - IPV6-HOP
                                      - L2TP
                                      - MPLS-IN-IP
                                      - NO-NEXT-HDR
                                      - OSPF
                                      - PIM
                                      - ROHC
                                      - RSVP
                                      - SCTP
                                      - ST
                                      - TCP
                                      - UDP
                                      - VRRP
                                    type: string
                                  protocolNumber:
                                    description: Match a specific IP protocol number (specified in the type field of the IP header).
                                    maximum: 255
                                    minimum: 0
                                    type: integer
                                  rateLimit:
                                    description: Rate limit to apply when the action is 'RateLimit'.
                                    properties:
                                      burstSize:
                                        description: The maximum burst size in bytes.
                                        format: int32
                                        type: integer
                                      entrySpecificPolicer:
                                        default: false
                                        description: 'Controls policer instantiation: false for shared instance, true for per-entry instances'
                                        type: boolean
                                      peakRate:
                                        description: The peak rate in kilobytes per second.
                                        format: int32
                                        type: integer
                                      scope:
                                        default: Global
                                        description: Determines how the policer is applied across subinterfaces. Global applies the policer across all subinterfaces, while Subinterface applies it individually to each subinterface.
                                        enum:
                                          - Global
                                          - Subinterface
                                        type: string
                                    type: object
                                  sourcePortName:
                                    description: Source port to match by name.
                                    enum:
                                      - ACAP
                                      - AFP-TCP
                                      - ARNS
                                      - ASF-RMCP
                                      - ASHARE
                                      - ATALK-RM
                                      - AURP
                                      - AUTH
                                      - BFD
                                      - BFD-ECHO
                                      - BFTP
                                      - BGMP
                                      - BGP
                                      - BOOTPC
                                      - BOOTPS
                                      - CCSO-NS
                                      - CHARGEN
                                      - CISCO-TDP
                                      - CITADEL
                                      - CLEARCASE
                                      - COMMERCE
                                      - COURIER
                                      - DAYTIME
                                      - DHCP-FAILOVER
                                      - DHCPV6-CLIENT
                                      - DHCPV6-SERVER
                                      - DICOM
                                      - DISCARD
                                      - DNSIX
                                      - DOMAIN
                                      - DSP
                                      - ECHO
                                      - EPP
                                      - ESRO
                                      - EXEC
                                      - FINGER
                                      - FTP
                                      - FTP-DATA
                                      - FTPS
                                      - FTPS-DATA
                                      - GODI
                                      - GOPHER
                                      - GTP-C
                                      - GTP-PRIME
                                      - GTP-U
                                      - HA-CLUSTER
                                      - HOSTNAME
                                      - HP-ALARM-MGR
                                      - HTTP
                                      - HTTP-ALT
                                      - HTTP-MGMT
                                      - HTTP-RPC
                                      - HTTPS
                                      - IEEE-MMS-SSL
                                      - IMAP
                                      - IMAP3
                                      - IMAPS
                                      - IPP
                                      - IPSEC
                                      - IPX
                                      - IRC
                                      - IRIS-BEEP
                                      - ISAKMP
                                      - ISAKMP-NAT
                                      - ISCSI
                                      - ISO-TSAP
                                      - KERBEROS
                                      - KERBEROS-ADM
                                      - KLOGIN
                                      - KPASSWD
                                      - KSHELL
                                      - L2TP
                                      - LDAP
                                      - LDAPS
                                      - LDP
                                      - LMP
                                      - LOGIN
                                      - LPD
                                      - LSP-PING
                                      - MAC-SERVER-ADM
                                      - MATIP-A
                                      - MATIP-B
                                      - MICRO-BFD
                                      - MICROSOFT-DS
                                      - MOBILE-IP
                                      - MONITOR
                                      - MPP
                                      - MS-EXCHANGE
                                      - MSDP
                                      - MSP
                                      - MSSQL-M
                                      - MSSQL-S
                                      - MULTIHOP-BFD
                                      - NAS
                                      - NCP
                                      - NETBIOS-DATA
                                      - NETBIOS-NS
                                      - NETBIOS-SS
                                      - NETNEWS
                                      - NETRJS-1
                                      - NETRJS-2
                                      - NETRJS-3
                                      - NETRJS-4
                                      - NETWALL
                                      - NEW-RWHO
                                      - NFS
                                      - NNTP
                                      - NNTPS
                                      - NTP
                                      - ODMR
                                      - OLSR
                                      - OPENVPN
                                      - PIM-AUTO-RP
                                      - PKIX-TIMESTAMP
                                      - POP2
                                      - POP3
                                      - POP3S
                                      - PPTP
                                      - PRINT-SRV
                                      - PTP-EVENT
                                      - PTP-GENERAL
                                      - QMTP
                                      - QOTD
                                      - RADIUS
                                      - RADIUS-ACCT
                                      - REMOTE-MAIL
                                      - REMOTEFS
                                      - REMOTECMD
                                      - RIP
                                      - RJE
                                      - RLP
                                      - RLZDB
                                      - RMC
                                      - RMONITOR
                                      - RPC2PORTMAP
                                      - RSYNC
                                      - RTELNET
                                      - RTSP
                                      - SGMP
                                      - SILC
                                      - SMUX
                                      - SNA-GW
                                      - SNMP
                                      - SNMP-TRAP
                                      - SNPP
                                      - SMTP
                                      - SQL-SVCS
                                      - SQL
                                      - SSH
                                      - SUBMISSION
                                      - SUNRPC
                                      - SVCLOC
                                      - SYSLOG
                                      - SYSTAT
                                      - TACACS
                                      - TALK
                                      - TCPMUX
                                      - TCPNETHASPSRV
                                      - TFTP
                                      - TIME
                                      - TIMED
                                      - UPS
                                      - XDMCP
                                      - XNS-CH
                                      - XNS-MAIL
                                      - XNS-TIME
                                      - Z3950
                                    type: string
                                  sourcePortNumber:
                                    description: Source port to match by numerical value.
                                    maximum: 65535
                                    minimum: 0
                                    type: integer
                                  sourcePortOperator:
                                    description: Operator to use when matching sourcePort, either Equals, GreaterOrEquals, or LessOrEquals.
                                    enum:
                                      - Equals
                                      - GreaterOrEquals
                                      - LessOrEquals
                                    type: string
                                  sourcePortRange:
                                    description: Range of source ports to match, in the format n-m, e.g. 100-200.  The start and end of the range must be port numbers.
                                    type: string
                                  sourcePrefix:
                                    description: Source prefix to match.
                                    type: string
                                  tcpFlags:
                                    description: Match TCP flags, usable with !, &, | and the flags RST, SYN, and ACK.
                                    type: string
                                type: object
                              type:
                                default: Auto
                                description: Type of the entry which can be IPV4, IPV6 or Auto.
                                enum:
                                  - IPV4
                                  - IPV6
                                  - Auto
                                type: string
                            required:
                              - type
                            type: object
                          type: array
                        statisticsPerEntry:
                          description: Enable or disable per-entry counters.
                          type: boolean
                      required:
                        - entries
                      type: object
                    subinterfaces:
                      description: Subinterfaces on which to deploy the IPFilter to use as a source for the Mirror.
                      properties:
                        bridgeInterfaces:
                          description: List of BridgeInterfaces, all traffic from all BridgeInterfaces in the list will be used as sources to be mirrored. A combination of VLANs, BridgeInterfaces and subinterfaces can be configured as sources together.
                          items:
                            type: string
                          type: array
                        subinterfaces:
                          description: List of Interfaces and subinterface indices
                          items:
                            properties:
                              index:
                                description: Index of the sub-interface. This is ignored on a node running SROS.
                                type: integer
                              interfaceName:
                                description: Reference to an Interface resource, the combination of the Interface and the specified subinterface index will build the subinterface to be used as a source of traffic to be mirrored. A combination of VLANs, BridgeInterfaces and subinterfaces can be configured as sources together.
                                type: string
                              vlan:
                                description: Reference to the VLAN resource under which the sub-interface is configured. This is mandatory when the sub-interface is on a node running SROS and ignored for all other node operating systems.
                                type: string
                            required:
                              - interfaceName
                            type: object
                          type: array
                        vlans:
                          description: List of VLAN resources, all subinterfaces attached to the VLAN will be used as sources to be mirrored.  A combination of VLANs, BridgeInterfaces and subinterfaces can be configured as sources together.
                          items:
                            type: string
                          type: array
                      type: object
                  type: object
                type: array
              interfaces:
                description: Reference to an Interface resource to be mirrored.  Traffic from the entire Interface will be mirrored for any selected Interfaces.
                properties:
                  interfaceSelector:
                    description: Select Interfaces using a label selector to be mirrored.  Traffic from the entire Interface will be mirrored for any selected Interfaces.  If both a label selector is used and a list of Interfaces is provided, a combination of all selected and provided interfaces will be mirrored.
                    items:
                      type: string
                    type: array
                  interfaces:
                    description: List of Interfaces to be mirrored.  Traffic from the entire Interface will be mirrored for any selected Interfaces.  If both a label selector is used and a list of Interfaces is provided, a combination of all selected and provided interfaces will be mirrored.
                    items:
                      type: string
                    type: array
                type: object
              subinterfaces:
                properties:
                  bridgeInterfaces:
                    description: List of BridgeInterfaces, all traffic from all BridgeInterfaces in the list will be used as sources to be mirrored. A combination of VLANs, BridgeInterfaces and subinterfaces can be configured as sources together.
                    items:
                      type: string
                    type: array
                  subinterfaces:
                    description: List of Interfaces and subinterface indices
                    items:
                      properties:
                        index:
                          description: Index of the sub-interface. This is ignored on a node running SROS.
                          type: integer
                        interfaceName:
                          description: Reference to an Interface resource, the combination of the Interface and the specified subinterface index will build the subinterface to be used as a source of traffic to be mirrored. A combination of VLANs, BridgeInterfaces and subinterfaces can be configured as sources together.
                          type: string
                        vlan:
                          description: Reference to the VLAN resource under which the sub-interface is configured. This is mandatory when the sub-interface is on a node running SROS and ignored for all other node operating systems.
                          type: string
                      required:
                        - interfaceName
                      type: object
                    type: array
                  vlans:
                    description: List of VLAN resources, all subinterfaces attached to the VLAN will be used as sources to be mirrored.  A combination of VLANs, BridgeInterfaces and subinterfaces can be configured as sources together.
                    items:
                      type: string
                    type: array
                type: object
            required:
              - direction
            type: object
        required:
          - sources
        type: object
      status:
        description: MirrorStatus defines the observed state of Mirror
        properties:
          lastChange:
            description: Indicates when this SubInterface last changed state.
            type: string
          mirrorID:
            description: Mirror Identifier used as the name of the mirror.
            type: string
          numActiveInterfaces:
            description: Total number of active Interfaces used as sources of the mirror.
            type: integer
          numActiveSubinterfaces:
            description: Total number of active subinterfaces used as sources of the mirror.
            type: integer
          numActiveV4FilterSubinterfaces:
            description: Total number of active subinterfaces used as sources of the mirror derived from IPV4Filter associations.
            type: integer
          numActiveV6FilterSubinterfaces:
            description: Total number of active subinterfaces used as sources of the mirror derived from IPV6Filter associations.
            type: integer
          numActiveVLANSubinterfaces:
            description: Total number of active subinterfaces used as sources of the mirror derived from VLAN resource references.
            type: integer
          numberActiveBridgeInterfaces:
            description: Total number of active subinterfaces used as sources of the mirror derived from BridgeInterface resource references.
            type: integer
          operationalState:
            description: Indicates the current operational state of the Mirror instance.
            type: string
          subinterfaces:
            description: List of members in this Interface.
            items:
              properties:
                configuredSource:
                  description: Indicates what is driving the particular subinterface to be selected as a mirror source.
                  enum:
                    - VLAN
                    - BridgeInterface
                    - Subinterface
                    - Interface
                    - FilterV4
                    - FilterV6
                  type: string
                interface:
                  description: Node specific interface name.
                  type: string
                node:
                  description: Reference to Node object.
                  type: string
                operatingSystem:
                  description: Operating System of the Node.
                  type: string
                subinterfaceIndex:
                  description: Index allocated to the subinterface which is being mirrored. If an interface is used as a source, this will not be set.
                  type: integer
                vlanID:
                  description: vlan assigned to this subinterface.
                  type: string
              required:
                - configuredSource
                - interface
                - node
                - operatingSystem
              type: object
            type: array
        type: object
    type: object
served: true
storage: true
subresources:
  status: {}
