apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    config.k8s.io/owning-inventory: dd24290682a6740bebd6585febc188fc0a438f0e-1755345859179138958
    controller-gen.kubebuilder.io/version: v0.18.0
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"apiextensions.k8s.io/v1","kind":"CustomResourceDefinition","metadata":{"annotations":{"config.k8s.io/owning-inventory":"dd24290682a6740bebd6585febc188fc0a438f0e-1755345859179138958","controller-gen.kubebuilder.io/version":"v0.18.0"},"name":"artifacts.artifacts.eda.nokia.com"},"spec":{"group":"artifacts.eda.nokia.com","names":{"kind":"Artifact","listKind":"ArtifactList","plural":"artifacts","singular":"artifact"},"scope":"Namespaced","versions":[{"additionalPrinterColumns":[{"jsonPath":".status.downloadStatus","name":"Status","type":"string"}],"name":"v1","schema":{"openAPIV3Schema":{"description":"Artifact is the Schema for the artifacts API","properties":{"apiVersion":{"description":"APIVersion defines the versioned schema of this representation of an object.\nServers should convert recognized schemas to the latest internal value, and\nmay reject unrecognized values.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources","type":"string"},"kind":{"description":"Kind is a string value representing the REST resource this object represents.\nServers may infer this from the endpoint the client submits requests to.\nCannot be updated.\nIn CamelCase.\nMore info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds","type":"string"},"metadata":{"type":"object"},"spec":{"description":"ArtifactSpec defines the desired state of Artifact","properties":{"filePath":{"description":"Provide the file path, including an optional file name\nFor Artifacts that are directories themselves a file name is not required","minLength":1,"type":"string"},"fromConfigMap":{"description":"The secret from which the file is to be hosted in the artifact server","properties":{"key":{"description":"Key of the data field","minLength":1,"type":"string"},"name":{"description":"The name of the configMap","minLength":1,"type":"string"},"namespace":{"description":"The namespace of the configMap","type":"string"}},"required":["key","name","namespace"],"type":"object"},"fromSecret":{"description":"The secret from which the file is to be hosted in the artifact server","properties":{"key":{"description":"Key of the data field","minLength":1,"type":"string"},"name":{"description":"The name of the secret","minLength":1,"type":"string"},"namespace":{"description":"The namespace of the secret","type":"string"}},"required":["key","name","namespace"],"type":"object"},"git":{"description":"A git hash can be used to pull down the file from git","properties":{"filePath":{"description":"The file path within the git repository to pull down","type":"string"},"gitHash":{"description":"Git hash of the file to pull down.","pattern":"^[0-9a-fA-F]+$","type":"string"},"repoUrl":{"description":"The remote URL of the git repository from which to pull down the file","format":"uri","type":"string"}},"required":["filePath","gitHash","repoUrl"],"type":"object"},"oci":{"description":"The container and registry to pull down and host in the artifact server registry","properties":{"digest":{"description":"Digest of the file blob which needs to be downloaded","pattern":"^sha256:[a-fA-F0-9]{64}$","type":"string"},"registry":{"description":"The remote registry from which to pull down the OCI artifact","minLength":1,"type":"string"},"repository":{"description":"The name of the repository to pull down into the artifact server","minLength":1,"type":"string"},"tag":{"description":"Tag of the image which need to be pulled","type":"string"}},"required":["registry","repository"],"type":"object"},"remoteFileUrl":{"description":"the remote URL from which to download the file to host in the artifact server","properties":{"fileUrl":{"description":"This is the remote URL from which to download the file to store in the artifact server. Supported protocols are HTTPS and SFTP, URL format should include the protocol.","type":"string"},"md5Url":{"description":"This is the remote URL from which to download a text file containing the MD5 hash against which the artifact server will validate the artifact before hosting","type":"string"}},"required":["fileUrl"],"type":"object"},"repo":{"description":"Provide the repo\nMultiple artifacts can have same repo","minLength":1,"type":"string","x-kubernetes-validations":[{"message":"repo is immutable","rule":"self == oldSelf"}]},"secret":{"description":"If provided the secret to use for authenticating","type":"string"},"textFile":{"properties":{"content":{"description":"Content of the text file","type":"string"}},"required":["content"],"type":"object"},"trustBundle":{"description":"If provided the configmap contains the trust bundle for https upstream","type":"string"}},"required":["filePath","repo"],"type":"object"},"status":{"description":"ArtifactStatus defines the observed state of Artifact","properties":{"downloadStatus":{"enum":["InProgress","Error","Failed","Available"],"type":"string"},"externalUrl":{"description":"External (outside of cluster) URL where this Artifact is reachable","type":"string"},"internalUrl":{"description":"Internal (in cluster) URL where this Artifact is reachable","type":"string"},"lastExternalAddress":{"type":"string"},"observedGeneration":{"format":"int64","type":"integer"},"statusReason":{"description":"Human-readable message indicating details about the downloadStatus's Error|Failed state","type":"string"}},"type":"object"}},"type":"object"}},"served":true,"storage":true,"subresources":{"status":{}}}]}}
  creationTimestamp: "2025-08-16T12:04:20Z"
  generation: 1
  name: artifacts.artifacts.eda.nokia.com
  resourceVersion: "1942"
  uid: 800bdff8-7212-401a-ae70-fd70831dee2d
spec:
  conversion:
    strategy: None
  group: artifacts.eda.nokia.com
  names:
    kind: Artifact
    listKind: ArtifactList
    plural: artifacts
    singular: artifact
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.downloadStatus
      name: Status
      type: string
    name: v1
    schema:
      openAPIV3Schema:
        description: Artifact is the Schema for the artifacts API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: ArtifactSpec defines the desired state of Artifact
            properties:
              filePath:
                description: |-
                  Provide the file path, including an optional file name
                  For Artifacts that are directories themselves a file name is not required
                minLength: 1
                type: string
              fromConfigMap:
                description: The secret from which the file is to be hosted in the
                  artifact server
                properties:
                  key:
                    description: Key of the data field
                    minLength: 1
                    type: string
                  name:
                    description: The name of the configMap
                    minLength: 1
                    type: string
                  namespace:
                    description: The namespace of the configMap
                    type: string
                required:
                - key
                - name
                - namespace
                type: object
              fromSecret:
                description: The secret from which the file is to be hosted in the
                  artifact server
                properties:
                  key:
                    description: Key of the data field
                    minLength: 1
                    type: string
                  name:
                    description: The name of the secret
                    minLength: 1
                    type: string
                  namespace:
                    description: The namespace of the secret
                    type: string
                required:
                - key
                - name
                - namespace
                type: object
              git:
                description: A git hash can be used to pull down the file from git
                properties:
                  filePath:
                    description: The file path within the git repository to pull down
                    type: string
                  gitHash:
                    description: Git hash of the file to pull down.
                    pattern: ^[0-9a-fA-F]+$
                    type: string
                  repoUrl:
                    description: The remote URL of the git repository from which to
                      pull down the file
                    format: uri
                    type: string
                required:
                - filePath
                - gitHash
                - repoUrl
                type: object
              oci:
                description: The container and registry to pull down and host in the
                  artifact server registry
                properties:
                  digest:
                    description: Digest of the file blob which needs to be downloaded
                    pattern: ^sha256:[a-fA-F0-9]{64}$
                    type: string
                  registry:
                    description: The remote registry from which to pull down the OCI
                      artifact
                    minLength: 1
                    type: string
                  repository:
                    description: The name of the repository to pull down into the
                      artifact server
                    minLength: 1
                    type: string
                  tag:
                    description: Tag of the image which need to be pulled
                    type: string
                required:
                - registry
                - repository
                type: object
              remoteFileUrl:
                description: the remote URL from which to download the file to host
                  in the artifact server
                properties:
                  fileUrl:
                    description: This is the remote URL from which to download the
                      file to store in the artifact server. Supported protocols are
                      HTTPS and SFTP, URL format should include the protocol.
                    type: string
                  md5Url:
                    description: This is the remote URL from which to download a text
                      file containing the MD5 hash against which the artifact server
                      will validate the artifact before hosting
                    type: string
                required:
                - fileUrl
                type: object
              repo:
                description: |-
                  Provide the repo
                  Multiple artifacts can have same repo
                minLength: 1
                type: string
                x-kubernetes-validations:
                - message: repo is immutable
                  rule: self == oldSelf
              secret:
                description: If provided the secret to use for authenticating
                type: string
              textFile:
                properties:
                  content:
                    description: Content of the text file
                    type: string
                required:
                - content
                type: object
              trustBundle:
                description: If provided the configmap contains the trust bundle for
                  https upstream
                type: string
            required:
            - filePath
            - repo
            type: object
          status:
            description: ArtifactStatus defines the observed state of Artifact
            properties:
              downloadStatus:
                enum:
                - InProgress
                - Error
                - Failed
                - Available
                type: string
              externalUrl:
                description: External (outside of cluster) URL where this Artifact
                  is reachable
                type: string
              internalUrl:
                description: Internal (in cluster) URL where this Artifact is reachable
                type: string
              lastExternalAddress:
                type: string
              observedGeneration:
                format: int64
                type: integer
              statusReason:
                description: Human-readable message indicating details about the downloadStatus's
                  Error|Failed state
                type: string
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
status:
  acceptedNames:
    kind: Artifact
    listKind: ArtifactList
    plural: artifacts
    singular: artifact
  conditions:
  - lastTransitionTime: "2025-08-16T12:04:20Z"
    message: no conflicts found
    reason: NoConflicts
    status: "True"
    type: NamesAccepted
  - lastTransitionTime: "2025-08-16T12:04:20Z"
    message: the initial names have been accepted
    reason: InitialNamesAccepted
    status: "True"
    type: Established
  storedVersions:
  - v1
